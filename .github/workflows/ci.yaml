name: "CI pipeline"

on:

  push:

    branches:

      - main

  pull_request:

    branches:

      - main



jobs:

  build:

    runs-on: ubuntu-latest



    steps:

      - name: Checkout repository

        uses: actions/checkout@v5



      - name: Set up Node.js

        uses: actions/setup-node@v5

        with:

          node-version: "18"

          cache: "npm"



      - name: Install dependencies

        run: npm ci --audit false



      - name: Lint code

        run: npm run lint || echo "Lint check failed, but continuing..."



      - name: Build application

        run: npm run build



      - name: Run security audit

        run: npm audit || echo "Security vulnerabilities found, but continuing..."



      - name: Cache node_modules


        uses: actions/cache@v5


        uses: actions/cache@v4

        with:

          path: |

            **/node_modules

          key: ${{ runner.os }}-modules-${{ hashFiles('**/package-lock.json') }}

          restore-keys: |

            ${{ runner.os }}-modules-



      - name: Upload build artifacts


        uses: actions/upload-artifact@v3


        uses: actions/upload-artifact@v4

        with:

          name: build

          path: dist/